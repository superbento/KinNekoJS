{"ast":null,"code":"var _jsxFileName = \"D:\\\\node workplace\\\\KinNekoJSBiao\\\\KinNekoJS\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './Login.css';\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    this.onChange = e => {\n      const state = this.state;\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            login = _this$state.login,\n            password = _this$state.password;\n      axios.post('http://localhost:3001/user/login', {\n        login,\n        password\n      }).then(result => {\n        window.localStorage.setItem('jwtToken', result.data.token);\n        window.localStorage.setItem('UserID', this.state.login);\n        this.setState({\n          message: ''\n        });\n        this.props.history.push('/');\n        window.location.href = '';\n      }).catch(error => {\n        if (error.response.status === 401) {\n          this.setState({\n            message: 'Login failed. Username or password not match'\n          });\n        }\n      });\n    };\n\n    this.state = {\n      login: '',\n      password: '',\n      message: ''\n    };\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          login = _this$state2.login,\n          password = _this$state2.password,\n          message = _this$state2.message;\n    return React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      class: \"form-signin\",\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, message !== '' && React.createElement(\"div\", {\n      class: \"alert alert-warning alert-dismissible\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, message), React.createElement(\"div\", {\n      class: \"box1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      class: \"form-signin-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Please sign in\"), React.createElement(\"label\", {\n      for: \"inputEmail\",\n      class: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Email address\"), React.createElement(\"input\", {\n      type: \"email\",\n      class: \"form-control\",\n      placeholder: \"Email address\",\n      name: \"login\",\n      value: login,\n      onChange: this.onChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"inputPassword\",\n      class: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      class: \"form-control\",\n      placeholder: \"Password\",\n      name: \"password\",\n      value: password,\n      onChange: this.onChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      class: \"btn btn-lg btn-primary btn-block\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Not a member? \", React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"glyphicon glyphicon-plus-sign\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), \" Register here\"))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:/node workplace/KinNekoJSBiao/KinNekoJS/src/components/Login.js"],"names":["React","Component","axios","Link","Login","constructor","onChange","e","state","target","name","value","setState","onSubmit","preventDefault","login","password","post","then","result","window","localStorage","setItem","data","token","message","props","history","push","location","href","catch","error","response","status","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom'\r\nimport './Login.css'\r\n\r\nclass Login extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {\r\n      login: '',\r\n      password: '',\r\n      message: ''\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const state = this.state\r\n    state[e.target.name] = e.target.value\r\n    this.setState(state)\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const { login, password } = this.state\r\n\r\n    axios.post('http://localhost:3001/user/login', { login, password })\r\n      .then((result) => {\r\n        window.localStorage.setItem('jwtToken', result.data.token)\r\n        window.localStorage.setItem('UserID', this.state.login)\r\n        this.setState({ message: '' })\r\n        this.props.history.push('/')\r\n        window.location.href = ''\r\n      })\r\n      .catch((error) => {\r\n        if (error.response.status === 401) {\r\n          this.setState({ message: 'Login failed. Username or password not match' })\r\n        }\r\n      })\r\n  }\r\n\r\n  render () {\r\n    const { login, password, message } = this.state\r\n    return (\r\n      <div class='container'>\r\n        <form class='form-signin' onSubmit={this.onSubmit}>\r\n          {message !== '' &&\r\n            <div class='alert alert-warning alert-dismissible' role='alert'>\r\n              {message}\r\n            </div>}\r\n            <div class=\"box1\"></div>\r\n          <h2 class='form-signin-heading'>Please sign in</h2>\r\n          <label for='inputEmail' class='sr-only'>Email address</label>\r\n          <input type='email' class='form-control' placeholder='Email address' name='login' value={login} onChange={this.onChange} required />\r\n          <label for='inputPassword' class='sr-only'>Password</label>\r\n          <input type='password' class='form-control' placeholder='Password' name='password' value={password} onChange={this.onChange} required />\r\n          <button class='btn btn-lg btn-primary btn-block' type='submit'>Login</button>\r\n          <p>\r\n            Not a member? <Link to='/register'><span class='glyphicon glyphicon-plus-sign' aria-hidden='true' /> Register here</Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}